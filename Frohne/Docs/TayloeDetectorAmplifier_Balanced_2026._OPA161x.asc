Version 4
SHEET 1 4032 1748
WIRE 608 -224 480 -224
WIRE 1056 -208 912 -208
WIRE 1200 -208 1120 -208
WIRE 480 -128 480 -224
WIRE 512 -128 480 -128
WIRE 912 -128 912 -208
WIRE 1008 -128 912 -128
WIRE 1200 -128 1200 -208
WIRE 1200 -128 1088 -128
WIRE 608 -112 608 -224
WIRE 608 -112 576 -112
WIRE 320 -96 272 -96
WIRE 384 -96 320 -96
WIRE 512 -96 464 -96
WIRE 320 -64 320 -96
WIRE -272 -48 -352 -48
WIRE 16 -48 -192 -48
WIRE -96 0 -208 0
WIRE 608 0 608 -112
WIRE 800 0 608 0
WIRE 912 0 912 -128
WIRE 912 0 880 0
WIRE 976 0 912 0
WIRE 320 16 320 0
WIRE 976 16 976 0
WIRE 1008 16 976 16
WIRE 1200 32 1200 -128
WIRE 1200 32 1072 32
WIRE 1264 32 1200 32
WIRE 1424 32 1328 32
WIRE 1456 32 1424 32
WIRE 1008 48 976 48
WIRE 1456 48 1456 32
WIRE -352 64 -352 -48
WIRE -272 64 -352 64
WIRE 16 64 -192 64
WIRE 496 64 256 64
WIRE 656 64 496 64
WIRE 976 64 976 48
WIRE 976 64 736 64
WIRE 3584 80 3504 80
WIRE 496 96 496 64
WIRE -96 112 -208 112
WIRE -352 128 -352 64
WIRE -352 128 -672 128
WIRE 1456 160 1456 128
WIRE -352 176 -352 128
WIRE -272 176 -352 176
WIRE 16 176 -192 176
WIRE 496 176 496 160
WIRE 3504 176 3504 160
WIRE 3584 176 3584 144
WIRE 3584 176 3504 176
WIRE 3424 192 3424 176
WIRE 3504 192 3504 176
WIRE -96 224 -208 224
WIRE 2016 240 1904 240
WIRE 2832 240 2720 240
WIRE 3760 256 3760 224
WIRE 1904 272 1904 240
WIRE 2720 272 2720 240
WIRE 3504 272 3424 272
WIRE 3584 272 3584 240
WIRE 3584 272 3504 272
WIRE -672 288 -672 128
WIRE -352 288 -352 176
WIRE -272 288 -352 288
WIRE 16 288 -192 288
WIRE 3504 288 3504 272
WIRE -96 336 -208 336
WIRE -992 352 -1168 352
WIRE -800 352 -912 352
WIRE -1168 368 -1168 352
WIRE 528 368 400 368
WIRE 1024 384 880 384
WIRE 1168 384 1088 384
WIRE -672 400 -672 368
WIRE -592 400 -672 400
WIRE -672 416 -672 400
WIRE -592 416 -592 400
WIRE 2016 432 1904 432
WIRE 2832 432 2720 432
WIRE 400 464 400 368
WIRE 432 464 400 464
WIRE 880 464 880 384
WIRE 976 464 880 464
WIRE 1168 464 1168 384
WIRE 1168 464 1056 464
WIRE 1904 464 1904 432
WIRE 2720 464 2720 432
WIRE 528 480 528 368
WIRE 528 480 496 480
WIRE 288 496 256 496
WIRE 320 496 288 496
WIRE 432 496 400 496
WIRE 288 528 288 496
WIRE -272 544 -352 544
WIRE 16 544 -192 544
WIRE -96 592 -208 592
WIRE 528 592 528 480
WIRE 768 592 528 592
WIRE 880 592 880 464
WIRE 880 592 848 592
WIRE 944 592 880 592
WIRE 288 608 288 592
WIRE 944 608 944 592
WIRE 976 608 944 608
WIRE 1168 624 1168 464
WIRE 1168 624 1040 624
WIRE 1232 624 1168 624
WIRE 1344 624 1296 624
WIRE 1376 624 1344 624
WIRE 976 640 944 640
WIRE 1376 640 1376 624
WIRE -352 656 -352 544
WIRE -272 656 -352 656
WIRE 16 656 -192 656
WIRE 368 656 256 656
WIRE 400 656 368 656
WIRE 944 656 944 640
WIRE 944 656 480 656
WIRE 368 688 368 656
WIRE -96 704 -208 704
WIRE -672 720 -672 496
WIRE -352 720 -352 656
WIRE -352 720 -672 720
WIRE 1376 752 1376 720
WIRE -352 768 -352 720
WIRE -272 768 -352 768
WIRE 16 768 -192 768
WIRE 368 768 368 752
WIRE -96 816 -208 816
WIRE -352 880 -352 768
WIRE -272 880 -352 880
WIRE 16 880 -192 880
WIRE -96 928 -208 928
FLAG -256 0 0
FLAG -256 112 0
FLAG -256 224 0
FLAG -256 336 0
FLAG -1168 368 0
FLAG 3760 144 +4.5
FLAG 3760 256 0
FLAG 3584 176 VGND
FLAG -96 0 V_0_deg
FLAG -96 112 V_90_deg
FLAG -96 224 V_180_deg
FLAG -96 336 V_270_deg
FLAG 1904 352 0
FLAG 2016 240 V_0_deg
FLAG 1904 544 0
FLAG 2016 432 V_90_deg
FLAG 2720 352 0
FLAG 2832 240 V_180_deg
FLAG 2720 544 0
FLAG 2832 432 V_270_deg
FLAG 16 -48 00
FLAG 16 176 11
FLAG 368 768 0
FLAG 16 64 01
FLAG 16 288 10
FLAG 496 176 0
FLAG 256 64 11
FLAG 256 656 10
FLAG 1344 624 V_I
FLAG 1424 32 V_Q
FLAG -256 592 0
FLAG -256 704 0
FLAG -256 816 0
FLAG -256 928 0
FLAG -96 592 V_0_deg
FLAG -96 704 V_90_deg
FLAG -96 816 V_180_deg
FLAG -96 928 V_270_deg
FLAG 16 768 00
FLAG 16 544 11
FLAG 16 880 01
FLAG 16 656 10
FLAG -800 432 0
FLAG 1040 64 0
FLAG 3504 288 0
FLAG 3504 80 +4.5
FLAG 1040 0 +4.5
FLAG -592 416 VGND
FLAG 1008 656 0
FLAG 1008 592 +4.5
FLAG 464 512 0
FLAG 464 448 +4.5
FLAG 544 -80 0
FLAG 544 -144 +4.5
FLAG 272 -96 00
FLAG 256 496 01
FLAG 288 608 0
FLAG 320 16 0
FLAG 1456 160 0
FLAG 1376 752 0
DATAFLAG 3424 176 ""
SYMBOL sw -288 -48 R270
SYMATTR InstName S7
SYMATTR Value MYSW
SYMBOL sw -288 64 R270
SYMATTR InstName S2
SYMATTR Value MYSW
SYMBOL sw -288 176 R270
SYMATTR InstName S4
SYMATTR Value MYSW
SYMBOL sw -288 288 R270
SYMATTR InstName S6
SYMATTR Value MYSW
SYMBOL voltage -896 352 R90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 32 56 VTop 2
WINDOW 123 118 56 VBottom 2
WINDOW 39 90 64 VBottom 2
SYMATTR InstName V3
SYMATTR Value SINE(0 10u {RF_Freq})
SYMATTR Value2 AC 1
SYMATTR SpiceLine Rser=50
SYMBOL voltage 3760 128 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value 4.5
SYMBOL voltage 1904 256 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value PULSE(0 1 0 1n 1n {SW_time-3n} {4*SW_time})
SYMBOL voltage 1904 448 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value PULSE(0 1 {SW_time-3n} 1n 1n {SW_time} {4*SW_time})
SYMBOL voltage 2720 256 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V6
SYMATTR Value PULSE(0 1 {2*SW_time-3n} 1n 1n {4*SW_time})
SYMBOL voltage 2720 448 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V7
SYMATTR Value PULSE(0 1 {3*SW_time-3n} 1n 1n {SW_time} {4*SW_time})
SYMBOL cap 384 752 R180
WINDOW 0 24 56 Left 2
WINDOW 3 24 8 Left 2
SYMATTR InstName C7
SYMATTR Value {C_Sample}
SYMBOL cap 512 160 R180
WINDOW 0 24 56 Left 2
WINDOW 3 24 8 Left 2
SYMATTR InstName C13
SYMATTR Value {C_Sample}
SYMBOL res 896 -16 R90
WINDOW 0 18 25 VBottom 2
WINDOW 3 33 63 VTop 2
SYMATTR InstName R6
SYMATTR Value 15
SYMBOL cap 1120 -224 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C4
SYMATTR Value 150p
SYMBOL sw -288 544 R270
SYMATTR InstName S1
SYMATTR Value MYSW
SYMBOL sw -288 656 R270
SYMATTR InstName S3
SYMATTR Value MYSW
SYMBOL sw -288 768 R270
SYMATTR InstName S5
SYMATTR Value MYSW
SYMBOL sw -288 880 R270
SYMATTR InstName S8
SYMATTR Value MYSW
SYMBOL ind2 -816 336 R0
SYMATTR InstName L1
SYMATTR Value 20µH
SYMATTR Type ind
SYMATTR SpiceLine Rser=1m
SYMBOL ind2 -656 384 R180
WINDOW 0 36 80 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName L2
SYMATTR Value 20µH
SYMATTR Type ind
SYMATTR SpiceLine Rser=1m
SYMBOL ind2 -656 512 R180
WINDOW 0 36 80 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName L3
SYMATTR Value 20µH
SYMATTR Type ind
SYMATTR SpiceLine Rser=1m
SYMBOL res 3488 64 R0
SYMATTR InstName R5
SYMATTR Value 1k
SYMBOL res 3488 176 R0
SYMATTR InstName R9
SYMATTR Value 1k
SYMBOL cap 3568 176 R0
WINDOW 0 41 29 Left 2
SYMATTR InstName C1
SYMATTR Value 0.1µ
SYMBOL cap 3568 80 R0
WINDOW 0 41 29 Left 2
SYMATTR InstName C3
SYMATTR Value 0.1µ
SYMBOL res 1072 448 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 10k
SYMBOL res 864 576 R90
WINDOW 0 18 25 VBottom 2
WINDOW 3 33 63 VTop 2
SYMATTR InstName R2
SYMATTR Value 15
SYMBOL cap 1088 368 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C2
SYMATTR Value 150p
SYMBOL cap 304 592 R180
WINDOW 0 24 56 Left 2
WINDOW 3 24 8 Left 2
SYMATTR InstName C5
SYMATTR Value {C_Sample}
SYMBOL cap 336 0 R180
WINDOW 0 24 56 Left 2
WINDOW 3 24 8 Left 2
SYMATTR InstName C6
SYMATTR Value {C_Sample}
SYMBOL res 1472 144 R180
WINDOW 0 36 76 Left 2
WINDOW 3 -71 59 Left 2
SYMATTR InstName R3
SYMATTR Value 600k
SYMBOL res 1392 736 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R7
SYMATTR Value 600k
SYMBOL cap 1296 608 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C9
SYMATTR Value 1µ
SYMBOL cap 1328 16 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C8
SYMATTR Value 1µF
SYMBOL OpAmps\\opamp2 1008 560 R0
SYMATTR InstName U5
SYMATTR Value OPA161x
SYMBOL OpAmps\\opamp2 1040 -32 R0
SYMATTR InstName U1
SYMATTR Value OPA161x
SYMBOL OpAmps\\opamp2 544 -176 R0
WINDOW 3 76 44 Left 2
SYMATTR Value OPA161x
SYMATTR InstName U2
SYMBOL OpAmps\\opamp2 464 416 R0
WINDOW 3 73 50 Left 2
SYMATTR Value OPA161x
SYMATTR InstName U3
SYMBOL res 496 640 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value 100
SYMBOL res 416 480 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R10
SYMATTR Value 10
SYMBOL res 752 48 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R11
SYMATTR Value 10
SYMBOL res 480 -112 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R12
SYMATTR Value 10
SYMBOL res 1104 -144 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 10k
SYMBOL voltage 3424 176 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V5
SYMATTR Value 2.25
TEXT 1880 -176 Left 2 !.model MYSW SW(Vt=0.5 Vh=-0.1 Ron=1 Roff=10Meg)
TEXT 2872 40 Left 2 !.tran 0 1m .5m 10n\n;.ac dec 10 10 1000Meg;\n;.noise V(V_Q) V3 dec 10 10 100meg\n;.op
TEXT 1880 -136 Left 2 !.param LO_freq={RF_freq - Audio_freq} LO_period={1/LO_freq} SW_time={LO_period/4} RF_freq=1Meg
TEXT 640 744 Left 2 !.param C_Sample=1nF
TEXT 1864 128 Left 4 ;Signals for voltage-controlled switches \nused to simulate our multiplexer.
TEXT 3256 -24 Left 4 ;Power Connections
TEXT -1040 272 Left 2 ;RF signal in
TEXT -584 -176 Left 4 ;Multiplexer
TEXT 2856 -16 Left 4 ;Simulation Control
TEXT 2872 184 Left 2 !;step dec param Audio_freq 1000 10000000 1
TEXT 2872 152 Left 2 !.param Audio_freq=10000
TEXT 1880 -96 Left 2 ;The filtering is not just due to the sampling capacitors.  It is also due to the op-amps.\nThis simulation has the roll off at almost 40 dB/decade without C2.  \nYou can also see this effect in the peaking at 100 kHz.  C2 removes the peaking,\nand makes it drop faster in the first couple of decades, but then the unity gain\nzero of the non-inverting amplifier takes over, so it only drops at 40 db/decade\nthereafter.
TEXT -592 520 Left 2 !K L1 L2 L3 .9975
TEXT 400 -320 Left 2 ;This tests the input bias.  It is better without the 15 Ohm risistor on the non-inverting input.
TEXT 1248 -56 Left 2 !.ic V(N003)=2.25 V(V_Q)=0
TEXT 1208 536 Left 2 !.ic V(N008)=2.25 V(V_Q)=0
TEXT 1168 208 Left 2 !.lib OPA161x.LIB
TEXT 1888 -224 Left 2 ;Use Gear in the Simulation->Settings->Spice.
